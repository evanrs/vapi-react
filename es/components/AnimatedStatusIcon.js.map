{"version":3,"file":"AnimatedStatusIcon.js","sources":["../../src/components/AnimatedStatusIcon.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\ntype CircularBar = {\n  x: number;\n  y: number;\n  rotate: number;\n};\n\ntype LineBar = {\n  x: number;\n  y: number;\n  width: number;\n  baseHeight: number;\n  maxHeight: number;\n  delay: number;\n  rotate: number;\n};\n\nexport interface AnimatedStatusIconProps {\n  /** Size of the icon in pixels */\n  size?: number;\n  /** Connection status */\n  connectionStatus?: 'disconnected' | 'connecting' | 'connected';\n  /** Whether a call is active */\n  isCallActive?: boolean;\n  /** Whether the assistant is speaking */\n  isSpeaking?: boolean;\n  /** Whether the assistant is typing */\n  isTyping?: boolean;\n  /** Whether there's an error */\n  isError?: boolean;\n  /** Volume level (0-1) for volume-responsive animations */\n  volumeLevel?: number;\n  /** Base color for inactive bars */\n  baseColor?: string;\n  /** Override animation type */\n  animationType?:\n    | 'spin'\n    | 'pulse'\n    | 'sequential'\n    | 'wave'\n    | 'none'\n    | 'scale'\n    | 'rotate-fade';\n  /** Override animation speed in milliseconds */\n  animationSpeed?: number;\n  /** Override colors for bars */\n  colors?: string | string[];\n  /** Number of bars (default: 17) */\n  barCount?: number;\n  /** Bar width ratio (0-1) */\n  barWidthRatio?: number;\n  /** Bar height ratio (0-1) */\n  barHeightRatio?: number;\n  /** Custom class name */\n  className?: string;\n}\n\nconst AnimatedStatusIcon: React.FC<AnimatedStatusIconProps> = ({\n  size = 40,\n  connectionStatus,\n  isCallActive,\n  isSpeaking,\n  isTyping,\n  isError,\n  volumeLevel = 0,\n  baseColor = '#9CA3AF',\n  animationType: overrideAnimationType,\n  animationSpeed: overrideAnimationSpeed,\n  colors: overrideColors,\n  barCount = 17,\n  barWidthRatio = 0.08,\n  barHeightRatio = 0.19,\n  className = '',\n}) => {\n  const [animationTime, setAnimationTime] = useState(0);\n\n  // Determine if we should use line layout (when call is active)\n  const useLineLayout = isCallActive;\n\n  // For line layout, we use 5 bars like in bars-scale-middle.svg\n  const actualBarCount = useLineLayout ? 5 : barCount;\n\n  // Determine animation type and color based on status\n  const getStatusConfig = () => {\n    if (isError) {\n      return {\n        animationType: 'pulse' as const,\n        colors: '#EF4444', // Red for errors\n        animationSpeed: 300,\n      };\n    } else if (connectionStatus === 'connecting') {\n      return {\n        animationType: 'spin' as const,\n        colors: '#FCD34D', // Yellow\n        animationSpeed: 1000,\n      };\n    } else if (isCallActive && isSpeaking) {\n      return {\n        animationType: 'scale' as const,\n        colors: '#F87171', // Light red\n        animationSpeed: 600, // Match the SVG animation duration\n      };\n    } else if (isCallActive) {\n      return {\n        animationType: 'none' as const,\n        colors: '#62F6B5', // Green\n        animationSpeed: 1000,\n      };\n    } else if (isTyping) {\n      return {\n        animationType: 'sequential' as const,\n        colors: '#60A5FA', // Blue\n        animationSpeed: 1000,\n      };\n    } else {\n      // When call is not active, show rotating circle\n      // return {\n      //   animationType: 'rotate-fade' as const,\n      //   colors: baseColor,\n      //   animationSpeed: 3000 // Much slower rotation (3 seconds per rotation)\n      // }\n      return {\n        animationType: 'none' as const,\n        colors: baseColor,\n        animationSpeed: 3000,\n      };\n    }\n  };\n\n  const statusConfig = getStatusConfig();\n\n  // Use override values if provided, otherwise use status-based config\n  const animationType = overrideAnimationType ?? statusConfig.animationType;\n  const animationSpeed = overrideAnimationSpeed ?? statusConfig.animationSpeed;\n  const colors = overrideColors ?? statusConfig.colors;\n\n  // Animation loop\n  useEffect(() => {\n    if (animationType !== 'none') {\n      const startTime = Date.now();\n      let animationFrame: number;\n\n      const animate = () => {\n        setAnimationTime((Date.now() - startTime) / animationSpeed);\n        animationFrame = requestAnimationFrame(animate);\n      };\n\n      animationFrame = requestAnimationFrame(animate);\n      return () => cancelAnimationFrame(animationFrame);\n    }\n  }, [animationType, animationSpeed]);\n\n  // Calculate SVG viewBox based on layout\n  const viewBoxSize = useLineLayout ? 24 : 253;\n  // const scale = size / viewBoxSize\n\n  // Generate bar positions for circular layout\n  const getCircularBars = (): CircularBar[] => {\n    const centerX = viewBoxSize / 2;\n    const centerY = viewBoxSize / 2;\n    const radius = viewBoxSize * 0.38; // Reduced from ~0.45 to 0.38 for better visibility\n\n    return Array.from({ length: actualBarCount }, (_, i) => {\n      const angle = (i / actualBarCount) * 2 * Math.PI - Math.PI / 2; // Start from top\n      const x = centerX + radius * Math.cos(angle);\n      const y = centerY + radius * Math.sin(angle);\n      const rotate = (angle * 180) / Math.PI + 90; // Convert to degrees and adjust for bar orientation\n\n      return { x, y, rotate };\n    });\n  };\n\n  const circularBars: CircularBar[] = getCircularBars();\n\n  // Generate bar positions for line layout (like bars-scale-middle.svg)\n  const getLineBars = (): LineBar[] => {\n    const spacing = 4.8;\n    // Create height pattern: smallest at edges, tallest in middle\n    const heightPattern = [0.5, 0.75, 1, 0.75, 0.5]; // Multipliers for base height\n\n    return Array.from({ length: 5 }, (_, i) => {\n      const baseBarHeight = 16; // Base height\n      const maxBarHeight = 22; // Max height for animation\n      const heightMultiplier = heightPattern[i];\n\n      return {\n        x: 1 + i * spacing,\n        y: 6,\n        width: 2.8,\n        baseHeight: baseBarHeight * heightMultiplier,\n        maxHeight: maxBarHeight,\n        delay: i === 2 ? 0 : Math.abs(i - 2) * 0.2, // Center bar starts first\n        rotate: 0,\n      };\n    });\n  };\n\n  // Get color for a specific bar\n  const getBarColor = (index: number): string => {\n    if (Array.isArray(colors)) {\n      return colors[index % colors.length];\n    }\n    return colors;\n  };\n\n  // Calculate opacity and transforms based on animation type\n  const getBarProps = (index: number, bar: CircularBar | LineBar) => {\n    const time = animationTime % 1; // Normalized to 0-1\n\n    switch (animationType) {\n      case 'rotate-fade': {\n        // Rotating fade effect like bars-rotate-fade.svg\n        const fadeSteps = actualBarCount;\n        const currentStep = (time * fadeSteps) % fadeSteps;\n\n        // Calculate distance from the \"highlight\" position\n        const distanceFromHighlight = Math.min(\n          Math.abs(index - currentStep),\n          Math.abs(index - currentStep + fadeSteps),\n          Math.abs(index - currentStep - fadeSteps)\n        );\n\n        // Create a smooth fade based on distance\n        const normalizedDistance = distanceFromHighlight / (fadeSteps / 2);\n        const opacity = Math.max(0.14, 1 - normalizedDistance * 0.86);\n\n        return { opacity, transform: '' };\n      }\n\n      case 'scale': {\n        // Speech pattern animation - each bar reacts differently to volume\n        if (useLineLayout && 'delay' in bar) {\n          const lineBar = bar as LineBar;\n\n          // Use volume level to determine overall activity\n          const volumeIntensity = Math.max(0, Math.min(1, volumeLevel));\n\n          // Each bar has different sensitivity and frequency response\n          const barCharacteristics = [\n            { sensitivity: 0.8, frequency: 1.2, baseActivity: 0.3 }, // Bar 0 - Low freq, less sensitive\n            { sensitivity: 1.0, frequency: 1.8, baseActivity: 0.4 }, // Bar 1 - Mid-low freq\n            { sensitivity: 1.2, frequency: 2.5, baseActivity: 0.5 }, // Bar 2 - Center, most responsive\n            { sensitivity: 1.0, frequency: 2.0, baseActivity: 0.4 }, // Bar 3 - Mid-high freq\n            { sensitivity: 0.9, frequency: 1.5, baseActivity: 0.35 }, // Bar 4 - High freq\n          ];\n\n          const barChar = barCharacteristics[index] || barCharacteristics[2];\n\n          // Create dynamic time-based variation for each bar\n          const time = animationTime % 1;\n          const barTime = (time * barChar.frequency) % 1;\n\n          // Generate pseudo-random speech-like pattern\n          const speechPattern =\n            Math.sin(barTime * 2 * Math.PI) * 0.3 +\n            Math.sin(barTime * 6 * Math.PI) * 0.2 +\n            Math.sin(barTime * 12 * Math.PI) * 0.1;\n\n          // Each bar responds differently based on volume and its characteristics\n          const barResponse = volumeIntensity * barChar.sensitivity;\n\n          // Combine base activity, volume response, and speech pattern\n          const activity = Math.max(\n            0,\n            Math.min(\n              1,\n              barChar.baseActivity +\n                barResponse * 0.6 +\n                speechPattern * volumeIntensity * 0.4\n            )\n          );\n\n          // Scale the bar height based on activity\n          const heightScale = 0.7 + activity * 1.1; // Range from 0.7x to 1.8x\n          const height = lineBar.baseHeight * heightScale;\n          const y = 12 - height / 2;\n\n          // Opacity varies with activity\n          const opacity = 0.4 + activity * 0.6;\n\n          return {\n            opacity,\n            height,\n            y,\n            transform: '',\n          };\n        }\n\n        // For circular layout, create a wave-like speech pattern\n        if (!useLineLayout) {\n          const volumeIntensity = Math.max(0, Math.min(1, volumeLevel));\n          const time = animationTime % 1;\n\n          // Create different wave patterns for each bar\n          const barAngle = (index / actualBarCount) * 2 * Math.PI;\n          const wavePattern =\n            Math.sin(time * 4 * Math.PI + barAngle) * 0.3 +\n            Math.sin(time * 8 * Math.PI + barAngle * 2) * 0.2 +\n            Math.sin(time * 16 * Math.PI + barAngle * 3) * 0.1;\n\n          // Each bar has different sensitivity based on position\n          const positionSensitivity =\n            0.7 + 0.3 * Math.sin(barAngle + Math.PI / 4);\n\n          const activity = Math.max(\n            0,\n            Math.min(\n              1,\n              0.3 +\n                volumeIntensity * positionSensitivity * 0.5 +\n                wavePattern * volumeIntensity * 0.2\n            )\n          );\n\n          return {\n            opacity: 0.4 + activity * 0.6,\n            transform:\n              activity > 0.5 ? `scale(${1 + (activity - 0.5) * 0.4})` : '',\n          };\n        }\n\n        return { opacity: 1, transform: '' };\n      }\n\n      case 'spin': {\n        // Rotating highlight effect\n        const spinPhase = (time * 2 * Math.PI) % (2 * Math.PI);\n        const barAngle = (index / actualBarCount) * 2 * Math.PI;\n        const diff = Math.abs(\n          ((spinPhase - barAngle + Math.PI) % (2 * Math.PI)) - Math.PI\n        );\n        return { opacity: 0.3 + 0.7 * (1 - diff / Math.PI), transform: '' };\n      }\n\n      case 'pulse':\n        // All bars pulse together\n        return {\n          opacity: 0.5 + 0.5 * Math.sin(time * 2 * Math.PI),\n          transform: '',\n        };\n\n      case 'sequential': {\n        // Sequential highlighting\n        const activeIndex = Math.floor(time * actualBarCount) % actualBarCount;\n        return {\n          opacity:\n            index === activeIndex ||\n            index === (activeIndex + 1) % actualBarCount\n              ? 1\n              : 0.3,\n          transform: '',\n        };\n      }\n\n      case 'wave': {\n        // Wave effect\n        const wavePhase = time * 2 * Math.PI;\n        const barPhase = (index / actualBarCount) * 2 * Math.PI;\n        return {\n          opacity: 0.5 + 0.5 * Math.sin(wavePhase + barPhase),\n          transform: '',\n        };\n      }\n\n      default:\n        return { opacity: 1, transform: '' };\n    }\n  };\n\n  // Bar dimensions\n  const barWidth = useLineLayout ? 2.8 : viewBoxSize * barWidthRatio;\n  const barHeight = useLineLayout ? 12 : viewBoxSize * barHeightRatio;\n  const barRadius = barWidth / 2;\n\n  // Get bars based on layout\n  const bars = useLineLayout ? getLineBars() : circularBars;\n\n  return (\n    <div\n      className={`relative ${className}`}\n      style={{ width: size, height: size }}\n    >\n      <svg\n        width={size}\n        height={size}\n        viewBox={`0 0 ${viewBoxSize} ${useLineLayout ? 24 : viewBoxSize + 1}`}\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {/* Add a subtle background circle for better visibility in circle mode */}\n        {!useLineLayout && (\n          <circle\n            cx={viewBoxSize / 2}\n            cy={viewBoxSize / 2}\n            r={viewBoxSize * 0.38} // Match the radius of the bars\n            fill=\"none\"\n            stroke={baseColor}\n            strokeWidth=\"1\"\n            opacity=\"0.05\"\n          />\n        )}\n\n        {bars.map((bar, index) => {\n          const isActive = animationType !== 'none';\n          const props = isActive\n            ? getBarProps(index, bar)\n            : { opacity: 1, transform: '' };\n          const color = isActive\n            ? getBarColor(index)\n            : colors === baseColor\n              ? baseColor\n              : getBarColor(index);\n\n          if (useLineLayout && 'width' in bar) {\n            // Line layout bars\n            const lineBar = bar as LineBar;\n            // Center the bars vertically based on their height\n            const yPosition =\n              props.y !== undefined ? props.y : 12 - lineBar.baseHeight / 2;\n\n            return (\n              <rect\n                key={index}\n                x={lineBar.x}\n                y={yPosition}\n                width={lineBar.width}\n                height={\n                  props.height !== undefined ? props.height : lineBar.baseHeight\n                }\n                fill={color}\n                opacity={props.opacity}\n                rx={lineBar.width / 2}\n              />\n            );\n          } else {\n            // Circular layout bars\n            const circularBar = bar as CircularBar;\n\n            // For rotate-fade animation, make height follow the fade effect\n            let finalBarHeight = barHeight;\n\n            if (animationType === 'rotate-fade') {\n              // Get the current highlight position from animation time\n              const fadeSteps = actualBarCount;\n              const currentStep = (animationTime % 1) * fadeSteps;\n\n              // Calculate distance from the current highlight position\n              const distanceFromHighlight = Math.min(\n                Math.abs(index - currentStep),\n                Math.abs(index - currentStep + fadeSteps),\n                Math.abs(index - currentStep - fadeSteps)\n              );\n\n              // Create height variation based on distance from highlight\n              // Bars near the highlight are taller\n              const normalizedDistance =\n                distanceFromHighlight / (fadeSteps / 2);\n              const heightMultiplier = 0.4 + 0.6 * (1 - normalizedDistance);\n\n              // Add a slight wave pattern for more organic feel\n              const waveOffset = Math.sin(normalizedDistance * Math.PI) * 0.2;\n              finalBarHeight = barHeight * (heightMultiplier + waveOffset);\n            } else {\n              // For other animations, use static height variation\n              const distanceFromFirst = Math.min(index, actualBarCount - index);\n              const heightMultiplier =\n                0.7 + 0.3 * (1 - distanceFromFirst / (actualBarCount / 2));\n              finalBarHeight = barHeight * heightMultiplier;\n            }\n\n            // Calculate the position adjustments to center the bar on its circular position\n            const barCenterX = circularBar.x - barWidth / 2;\n            const barCenterY = circularBar.y - finalBarHeight / 2;\n\n            return (\n              <rect\n                key={index}\n                x={barCenterX}\n                y={barCenterY}\n                width={barWidth}\n                height={finalBarHeight}\n                rx={barRadius}\n                fill={color}\n                opacity={props.opacity}\n                transform={\n                  circularBar.rotate !== 0\n                    ? `rotate(${circularBar.rotate} ${circularBar.x} ${circularBar.y})`\n                    : undefined\n                }\n                style={{\n                  transition:\n                    animationType === 'sequential'\n                      ? 'opacity 0.1s ease-in-out'\n                      : undefined,\n                }}\n              />\n            );\n          }\n        })}\n      </svg>\n    </div>\n  );\n};\n\nexport default AnimatedStatusIcon;\n"],"names":["AnimatedStatusIcon","size","connectionStatus","isCallActive","isSpeaking","isTyping","isError","volumeLevel","baseColor","overrideAnimationType","overrideAnimationSpeed","overrideColors","barCount","barWidthRatio","barHeightRatio","className","animationTime","setAnimationTime","useState","useLineLayout","actualBarCount","statusConfig","animationType","animationSpeed","colors","useEffect","startTime","animationFrame","animate","viewBoxSize","circularBars","centerX","centerY","radius","_","angle","x","y","rotate","getLineBars","heightPattern","i","heightMultiplier","getBarColor","index","getBarProps","bar","time","fadeSteps","currentStep","normalizedDistance","lineBar","volumeIntensity","barCharacteristics","barChar","barTime","speechPattern","barResponse","activity","heightScale","height","barAngle","wavePattern","positionSensitivity","spinPhase","activeIndex","wavePhase","barPhase","barWidth","barHeight","barRadius","bars","jsx","jsxs","isActive","props","color","yPosition","circularBar","finalBarHeight","waveOffset","barCenterX","barCenterY"],"mappings":"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"}